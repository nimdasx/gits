https://github.com/ZoeyVid/NPMplus?tab=readme-ov-file#geoblocking-example-mainly-community-support

#1
set the NGINX_LOAD_GEOIP2_MODULE env to true and redeploy NPMplus

    volumes:
      - "./data:/data"
    environment:
      - "TZ=Asia/Jakarta"
      - "NGINX_LOAD_GEOIP2_MODULE=true"

#2
deploy a geoipupdate container (see the compose.yaml for an example, create credentials https://www.maxmind.com/en/geolite2/signup

  geoipupdate:
    container_name: npmplus-geoipupdate
    image: ghcr.io/maxmind/geoipupdate:latest
    restart: unless-stopped
    network_mode: bridge
    environment:
      - "TZ=Asia/Jakarta" # needs to be changed
      - "GEOIPUPDATE_EDITION_IDS=GeoLite2-Country GeoLite2-City GeoLite2-ASN"
      - "GEOIPUPDATE_ACCOUNT_ID=12345" # needs to be changed
      - "GEOIPUPDATE_LICENSE_KEY=f3h7as24389123hjfas8fgd34" # needs to be changed
      - "GEOIPUPDATE_FREQUENCY=24"
    volumes:
      - "./data/geoip:/usr/share/GeoIP"

#3
data/custom_nginx/http_top.conf

geoip2 /data/geoip/GeoLite2-Country.mmdb {
  auto_reload 60m;
  $geoip2_country_iso_code country iso_code;
}

#4
custom configuration on proxy host

#blokir selain dari indonesia, by fadhli wkwkwk
if ($geoip2_country_iso_code != "ID") {
    return 444;
}